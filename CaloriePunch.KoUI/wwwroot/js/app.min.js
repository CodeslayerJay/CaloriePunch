function Bootstrap(){require(["app","./services/router"],function(n,t){var i=t.currentView();i&&require([i],function(t){n.loadView(t)})})}var _appConfig={AppName:"CaloriePunch",Roles:["Admin","User","Guest"]};require.config({baseUrl:"/js/app/",paths:{bootstrap:"/lib/bootstrap/dist/js/bootstrap",jquery:"/lib/jquery/dist/jquery",knockout:"/lib/knockout/knockout-3.5.1","knockout-mapping":"/lib/knockout/knockout-mapping",text:"/lib/text.min",dayjs:"/lib/dayjs.min",httpService:"/js/app/services/httpService"},waitSeconds:30,config:{app:_appConfig}});define("app",["require","knockout","bootstrap","jquery","./config","module","knockout-mapping","dayjs"],function(n,t){var r=function(){return{viewModel:t.observable(),isLoading:t.observable(!1),loadView:function(n){var i=new n(this),r;this.viewModel(i);r=document.getElementById("app");t.applyBindings(i,r);typeof i.initOnBinding=="function"&&i.initOnBinding();r.style.display="block"},displayLoadingScreen:function(n){n=n||!1;var t=document.getElementById("loadingScreen");t.style.display=n?"block":"none"},Watchers:function(){var n=this;n.isLoading.subscribe(function(t){n.displayLoadingScreen(t)})}}},i=new r;return i.Watchers(),i});Bootstrap();define("config",["knockout","knockout-mapping"],function(n,t){Array.prototype.firstOrDefault=function(n,t){var i=this[this.map(function(t){return t[n]}).indexOf(t)];return i?i:null};Array.prototype.match=function(n){var t=null;return this.length>0&&this.indexOf(n)>=0&&(t=this[this.indexOf(n)]),t};Array.prototype.contains=function(n){var t=!1,i;if(!n)return t;if(n.length>0)for(i=0;i<n.length;i++)this.indexOf(n[i])>=0&&(t=!0);else t=this.indexOf(n)>=0;return t};n.bindingHandlers.cpNumeric={init:function(n,t,i,r,u){var e=i(),o=n,f=t(),s=u;f.subscribe(function(n){n&&(n=f.replace(/\D/g,""))})},update:function(n,t,i,r,u){var f=i(),e=n,o=t(),s=u}};var i=function(){var t=new n.bindingProvider;this.nodeHasBindings=t.nodeHasBindings;this.getBindings=function(n,i){var r;try{r=t.getBindings(n,i)}catch(u){console&&console.error&&console.error("Knockout Error in binding: "+u.message,n,i)}return r}};n.bindingProvider.instance=new i;n.mapping=t});define("auth/authConfig",function(){return{roles:["admin","user","guest"],redirectPageWhenLoggedOut:"signin",redirectPageWhenLoggedIn:"dashboard",allowAuthRedirects:!0}});define("auth/authService",["require","module","httpService","./authConfig","knockout"],function(n,t,i,r,u){var f=function(){return{__isAuth:u.observable(!0),config:r,isAuth:function(){return this.__isAuth()},authenticate:function(){http.postAsync("Auth",{}).done(function(){})},getUserRoles:function(){var n=this.getUserProfile();return n&&n.roles?roles:["user"]},getUserProfile:function(){var n=window.localStorage.getItem("userProfile");if(n)return n}}},e=function(n){var t=this;n=n||{};t.UserId=n.userId;t.Username=n.username;t.Roles=n.roles};return new f});define("httpService",["require","knockout","bootstrap","jquery"],function(n,t,i,r){var u={baseUrl:"https://localhost:44352/api",headers:{},crossDomain:!0,data:null,dataType:"json",method:"GET",contentType:"application/json"},f=function(){return{getAsync:function(n){return u.url=u.baseUrl+"/"+n,u.method="GET",r.ajax(u)},postAsync:function(n,i){return u.url=u.baseUrl+"/"+n,u.data=t.toJSON(i),u.method="POST",r.ajax(u)},updateAsync:function(n,i){return u.url=u.baseUrl+"/"+n,u.data=t.toJSON(i),u.method="PUT",r.ajax(u)},deleteAsync:function(n){return u.url=u.baseUrl+"/"+n,u.method="DELETE",r.ajax(u)}}};return new f});define("services/router",["require","module","../auth/authService"],function(n,t,i){var r=i,u=[{name:"default",path:"",requireAuth:!1},{name:"signin",path:"views/signin",requireAuth:!1},{name:"signup",path:"views/signup",requireAuth:!0},{name:"dashboard",path:"views/dashboard",roles:["user"],requireAuth:!0}],f=function(){return{routes:u,find:function(n,t,i){return u.filter(function(r){return r.name==n||r.view==t||r.role==i})},currentView:function(){var t=this.__getPageName(),n=u.firstOrDefault("name",t);return this.__GuardView(n),n?n.path:null},__GuardView:function(n){if(!n||!r.config.allowAuthRedirects)return!1;var i=this.__verifyRoleAccess(n.roles),f=u.firstOrDefault("name",r.config.redirectPageWhenLoggedOut),e=u.firstOrDefault("name",r.config.redirectPageWhenLoggedIn),t=null;n.requireAuth&&!r.isAuth()&&(t=f.name);n.requireAuth==!1&&r.isAuth()&&(t=e.name);n.requireAuth&&r.isAuth()&&i==!1&&(t=e.name);n.requireAuth!=!1||r.isAuth()||i!=!1||(t=f.name);t&&this.__redirectPage(t)},__verifyRoleAccess:function(n){var t=r.getUserRoles();t.contains(n)},__getPageName:function(){var n=window.location.pathname.split("/")[1];return n?n.toLowerCase():null},__redirectPage:function(n){window.location.href=n?n:"/"}}};return new f});define("views/dashboard",["require","knockout","bootstrap","jquery","httpService"],function(n,t,i,r,u){t.components.register("navbar-component",{viewModel:{require:"components/navbar/navbar"},template:{require:"text!components/navbar/navbar.html"}});t.components.register("calorieEntry-component",{viewModel:{require:"components/calorieEntry/calorieEntry"},template:{require:"text!components/calorieEntry/calorieEntry.html"}});t.components.register("calorieEntryList-component",{viewModel:{require:"components/entryList/entryList"},template:{require:"text!components/entryList/entryList.html"}});return function(n){return{data:{dailyCalAllowance:t.observable(0),weeklyCalAllowance:t.observable(0)},errors:t.observableArray([]),infoMsg:t.observable(),isProcessing:t.observable(),methods:function(){var n=this;return{addToList:function(t){t&&n.$childModels.calorieEntryListVM().methods().addToList(t)},editEntry:function(t){t&&n.$childModels.calorieEntryVM().data.calorieEntryModel(t)},toggleSidebar:function(){n.$childModels.navbarVM().ux().toggleRightSideBar()},reloadList:function(){n.$childModels.calorieEntryListVM().methods().loadData()},subtractFromCalAllowances:function(i){i=i||0;var f=t.unwrap(n.data.dailyCalAllowance()),e=t.unwrap(n.data.weeklyCalAllowance()),r=f-i,u=e-i;isNaN(r)==!1&&isNaN(u)==!1&&(n.data.dailyCalAllowance(r),n.data.weeklyCalAllowance(u))},addToCalAllowances:function(i){i=i||0;var r=t.unwrap(n.data.dailyCalAllowance()),u=t.unwrap(n.data.weeklyCalAllowance()),f=r+i,e=u+i;n.data.dailyCalAllowance(f);n.data.weeklyCalAllowance(e)},getAllowances:function(){n.http.getCalorieAllowancesAsync().then(function(t){t&&(n.data.dailyCalAllowance(t.dailyAllowance),n.data.weeklyCalAllowance(t.weeklyAllowance))})}}},http:{getCalorieAllowancesAsync:function(){return new Promise(function(n){u.getAsync("Calorie/Allowances/1").done(function(t){n(t)})})}},$parent:n||{},$childModels:{calorieEntryVM:t.observable(),calorieEntryListVM:t.observable(),navbarVM:t.observable()},outputs:function(n){var t=this;n=n||{};n.data=n.data||null;t.methods()[n.method]&&t.methods()[n.method](n.data)},initOnBinding:function(){var n=this;n.$parent.displayLoadingScreen(!1);n.methods().getAllowances()}}}});define("views/signin",["require","knockout","bootstrap","jquery"],function(n,t){return function(n){return{errors:t.observableArray([]),infoMsg:t.observable(),isProcessing:t.observable(!1),data:{test:t.observable("testing")},methods:function(){},HTTP:{},$Parent:n||{},$Components:{}}}});define("views/signup",["require","knockout","bootstrap","jquery","module","exports"],function(n,t){return function(){return{test:t.observable("Yo!!! This Is Awesome! Muahahah")}}});